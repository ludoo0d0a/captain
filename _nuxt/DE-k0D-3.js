import{e as z,j as A,r as c,m as S,c as o,a,b as F,w as W,n as x,C as w,F as f,q as k,E as C,s as m,_ as q,o as l,t as E,B as M}from"./XM21gfKi.js";const Q={class:"w-full min-h-screen bg-gray-50 p-8"},R={class:"flex items-center mb-8"},G={class:"bg-white rounded shadow p-6"},H={class:"flex items-center mb-4"},J={class:"divide-y mb-4"},O=["onKeyup"],P={key:1,class:"flex-1"},X={key:2,class:"relative w-48"},Y=["onKeyup"],Z={key:0,class:"absolute z-10 bg-white border rounded shadow mt-1 w-full max-h-32 overflow-auto"},ee=["onMousedown"],te={key:0,class:"inline-block text-gray-400 text-xs"},se=["onClick"],ne=["onClick"],oe=["onClick"],le={class:"flex gap-2 mb-2 items-start"},ae={class:"relative w-48"},re={key:0,class:"absolute z-10 bg-white border rounded shadow mt-1 w-full max-h-32 overflow-auto"},ie=["onMousedown"],pe=z({__name:"manage-environments",setup(ue){const g=A(),L=g.environments,v=c(""),u=c(""),d=c(""),p=c(""),i=c(""),y=c(""),h=S(()=>{const s=new Set;return L.forEach(e=>(e.tags||[]).forEach(n=>s.add(n))),Array.from(s).sort()}),N=S(()=>{if(!y.value.trim())return L;const s=y.value.trim().toLowerCase();return L.filter(e=>e.name.toLowerCase().includes(s)||e.tags&&e.tags.some(n=>n.toLowerCase().includes(s)))}),_=c([]);function V(){var e;const s=((e=u.value.split(",").pop())==null?void 0:e.trim().toLowerCase())||"";_.value=s?h.value.filter(n=>n.toLowerCase().startsWith(s)&&!u.value.split(",").map(t=>t.trim().toLowerCase()).includes(n.toLowerCase())):h.value.filter(n=>!u.value.split(",").map(t=>t.trim().toLowerCase()).includes(n.toLowerCase()))}function I(s){let e=u.value.split(",").map(n=>n.trim()).filter(Boolean);e.includes(s)||e.push(s),u.value=e.join(", ")+", ",_.value=[]}const b=c([]);function K(){var e;const s=((e=i.value.split(",").pop())==null?void 0:e.trim().toLowerCase())||"";b.value=s?h.value.filter(n=>n.toLowerCase().startsWith(s)&&!i.value.split(",").map(t=>t.trim().toLowerCase()).includes(n.toLowerCase())):h.value.filter(n=>!i.value.split(",").map(t=>t.trim().toLowerCase()).includes(n.toLowerCase()))}function $(s){let e=i.value.split(",").map(n=>n.trim()).filter(Boolean);e.includes(s)||e.push(s),i.value=e.join(", ")+", ",b.value=[]}function T(){if(!v.value.trim())return;const s=u.value.split(",").map(e=>e.trim()).filter(Boolean);g.addEnvironment({id:"env-"+Math.random().toString(36).slice(2),name:v.value.trim(),tags:s}),v.value="",u.value=""}function j(s){d.value=s.id,p.value=s.name,i.value=(s.tags||[]).join(", ")}function B(s){if(!p.value.trim())return;const e=i.value.split(",").map(n=>n.trim()).filter(Boolean);g.updateEnvironment(s.id,{name:p.value.trim(),tags:e}),d.value="",p.value="",i.value=""}function U(){d.value="",p.value="",i.value=""}function D(s){g.removeEnvironment(s)}return(s,e)=>{const n=q;return l(),o("div",Q,[a("div",R,[F(n,{to:"/",class:"mr-4"},{default:W(()=>e[5]||(e[5]=[a("button",{class:"p-2 rounded hover:bg-gray-100",title:"Back to Environments"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})])],-1)])),_:1,__:[5]}),e[6]||(e[6]=a("h1",{class:"text-3xl font-bold"},"Manage Environments",-1))]),a("div",G,[a("div",H,[e[7]||(e[7]=a("h3",{class:"text-xl font-semibold flex-1"},"Environments",-1)),x(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),class:"border rounded px-2 py-1 text-sm ml-4 w-64",placeholder:"Quick filter by name or tag"},null,512),[[w,y.value]])]),a("ul",J,[(l(!0),o(f,null,k(N.value,t=>(l(),o("li",{key:t.id,class:"py-3 flex items-center gap-2"},[d.value===t.id?x((l(),o("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),class:"border rounded px-2 py-1 text-sm flex-1",onKeyup:C(r=>B(t),["enter"])},null,40,O)),[[w,p.value]]):(l(),o("span",P,E(t.name),1)),d.value===t.id?(l(),o("div",X,[x(a("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>i.value=r),class:"border rounded px-2 py-1 text-xs w-full",placeholder:"Tags (comma separated)",onInput:K,onKeyup:C(r=>B(t),["enter"])},null,40,Y),[[w,i.value]]),b.value.length?(l(),o("ul",Z,[(l(!0),o(f,null,k(b.value,r=>(l(),o("li",{key:r,class:"px-2 py-1 text-xs cursor-pointer hover:bg-blue-100",onMousedown:M(de=>$(r),["prevent"])},E(r),41,ee))),128))])):m("",!0)])):(l(),o(f,{key:3},[(l(!0),o(f,null,k(t.tags||[],r=>(l(),o("span",{key:r,class:"inline-block bg-gray-100 text-gray-700 text-xs rounded px-2 py-1 mr-1 min-w-[2.5rem] text-center"},E(r),1))),128)),!t.tags||!t.tags.length?(l(),o("span",te,"â€”")):m("",!0)],64)),d.value!==t.id?(l(),o("button",{key:4,class:"text-xs text-blue-600",onClick:r=>j(t)},"Rename/Tags",8,se)):m("",!0),d.value===t.id?(l(),o("button",{key:5,class:"text-xs text-green-600",onClick:r=>B(t)},"Save",8,ne)):m("",!0),d.value===t.id?(l(),o("button",{key:6,class:"text-xs text-gray-500",onClick:U},"Cancel")):m("",!0),a("button",{class:"text-xs text-red-600",onClick:r=>D(t.id)},"Delete",8,oe)]))),128))]),a("div",le,[x(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),class:"border rounded px-2 py-1 text-sm flex-1",placeholder:"New environment name",onKeyup:C(T,["enter"])},null,544),[[w,v.value]]),a("div",ae,[x(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>u.value=t),class:"border rounded px-2 py-1 text-xs w-full",placeholder:"Tags (comma separated)",onInput:V,onKeyup:C(T,["enter"])},null,544),[[w,u.value]]),_.value.length?(l(),o("ul",re,[(l(!0),o(f,null,k(_.value,t=>(l(),o("li",{key:t,class:"px-2 py-1 text-xs cursor-pointer hover:bg-blue-100",onMousedown:M(r=>I(t),["prevent"])},E(t),41,ie))),128))])):m("",!0)]),a("button",{class:"bg-blue-500 text-white px-3 py-1 rounded text-sm",onClick:T},"Add")])])])}}});export{pe as default};
