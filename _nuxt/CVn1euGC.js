import{e as D,h as z,r as p,m as S,c as n,a,b as F,w as W,n as x,C as w,F as f,q as k,E as C,s as v,_ as q,o as l,t as A,B as E}from"./XM21gfKi.js";const Q={class:"w-full min-h-screen bg-gray-50 p-8"},R={class:"flex items-center mb-8"},G={class:"bg-white rounded shadow p-6"},H={class:"flex items-center mb-4"},J={class:"divide-y mb-4"},O=["onKeyup"],P={key:1,class:"flex-1"},X={key:2,class:"relative w-48"},Y=["onKeyup"],Z={key:0,class:"absolute z-10 bg-white border rounded shadow mt-1 w-full max-h-32 overflow-auto"},ee=["onMousedown"],te={key:0,class:"inline-block text-gray-400 text-xs"},se=["onClick"],oe=["onClick"],ne=["onClick"],le={class:"flex gap-2 mb-2 items-start"},ae={class:"relative w-48"},ie={key:0,class:"absolute z-10 bg-white border rounded shadow mt-1 w-full max-h-32 overflow-auto"},re=["onMousedown"],ce=D({__name:"manage-applications",setup(ue){const g=z(),L=g.applications,m=p(""),u=p(""),d=p(""),c=p(""),r=p(""),h=p(""),y=S(()=>{const s=new Set;return L.forEach(e=>(e.tags||[]).forEach(o=>s.add(o))),Array.from(s).sort()}),M=S(()=>{if(!h.value.trim())return L;const s=h.value.trim().toLowerCase();return L.filter(e=>e.name.toLowerCase().includes(s)||e.tags&&e.tags.some(o=>o.toLowerCase().includes(s)))}),_=p([]);function N(){var e;const s=((e=u.value.split(",").pop())==null?void 0:e.trim().toLowerCase())||"";_.value=s?y.value.filter(o=>o.toLowerCase().startsWith(s)&&!u.value.split(",").map(t=>t.trim().toLowerCase()).includes(o.toLowerCase())):y.value.filter(o=>!u.value.split(",").map(t=>t.trim().toLowerCase()).includes(o.toLowerCase()))}function V(s){let e=u.value.split(",").map(o=>o.trim()).filter(Boolean);e.includes(s)||e.push(s),u.value=e.join(", ")+", ",_.value=[]}const b=p([]);function I(){var e;const s=((e=r.value.split(",").pop())==null?void 0:e.trim().toLowerCase())||"";b.value=s?y.value.filter(o=>o.toLowerCase().startsWith(s)&&!r.value.split(",").map(t=>t.trim().toLowerCase()).includes(o.toLowerCase())):y.value.filter(o=>!r.value.split(",").map(t=>t.trim().toLowerCase()).includes(o.toLowerCase()))}function K(s){let e=r.value.split(",").map(o=>o.trim()).filter(Boolean);e.includes(s)||e.push(s),r.value=e.join(", ")+", ",b.value=[]}function T(){if(!m.value.trim())return;const s=u.value.split(",").map(e=>e.trim()).filter(Boolean);g.addApplication({id:"app-"+Math.random().toString(36).slice(2),name:m.value.trim(),versions:[],tags:s}),m.value="",u.value=""}function $(s){d.value=s.id,c.value=s.name,r.value=(s.tags||[]).join(", ")}function B(s){if(!c.value.trim())return;const e=r.value.split(",").map(o=>o.trim()).filter(Boolean);g.updateApplication(s.id,{name:c.value.trim(),tags:e}),d.value="",c.value="",r.value=""}function U(){d.value="",c.value="",r.value=""}function j(s){g.removeApplication(s)}return(s,e)=>{const o=q;return l(),n("div",Q,[a("div",R,[F(o,{to:"/",class:"mr-4"},{default:W(()=>e[5]||(e[5]=[a("button",{class:"p-2 rounded hover:bg-gray-100",title:"Back to Applications"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})])],-1)])),_:1,__:[5]}),e[6]||(e[6]=a("h1",{class:"text-3xl font-bold"},"Manage Applications",-1))]),a("div",G,[a("div",H,[e[7]||(e[7]=a("h3",{class:"text-xl font-semibold flex-1"},"Applications",-1)),x(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t),class:"border rounded px-2 py-1 text-sm ml-4 w-64",placeholder:"Quick filter by name or tag"},null,512),[[w,h.value]])]),a("ul",J,[(l(!0),n(f,null,k(M.value,t=>(l(),n("li",{key:t.id,class:"py-3 flex items-center gap-2"},[d.value===t.id?x((l(),n("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=i=>c.value=i),class:"border rounded px-2 py-1 text-sm flex-1",onKeyup:C(i=>B(t),["enter"])},null,40,O)),[[w,c.value]]):(l(),n("span",P,A(t.name),1)),d.value===t.id?(l(),n("div",X,[x(a("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>r.value=i),class:"border rounded px-2 py-1 text-xs w-full",placeholder:"Tags (comma separated)",onInput:I,onKeyup:C(i=>B(t),["enter"])},null,40,Y),[[w,r.value]]),b.value.length?(l(),n("ul",Z,[(l(!0),n(f,null,k(b.value,i=>(l(),n("li",{key:i,class:"px-2 py-1 text-xs cursor-pointer hover:bg-blue-100",onMousedown:E(de=>K(i),["prevent"])},A(i),41,ee))),128))])):v("",!0)])):(l(),n(f,{key:3},[(l(!0),n(f,null,k(t.tags||[],i=>(l(),n("span",{key:i,class:"inline-block bg-gray-100 text-gray-700 text-xs rounded px-2 py-1 mr-1 min-w-[2.5rem] text-center"},A(i),1))),128)),!t.tags||!t.tags.length?(l(),n("span",te,"â€”")):v("",!0)],64)),d.value!==t.id?(l(),n("button",{key:4,class:"text-xs text-blue-600",onClick:i=>$(t)},"Rename/Tags",8,se)):v("",!0),d.value===t.id?(l(),n("button",{key:5,class:"text-xs text-green-600",onClick:i=>B(t)},"Save",8,oe)):v("",!0),d.value===t.id?(l(),n("button",{key:6,class:"text-xs text-gray-500",onClick:U},"Cancel")):v("",!0),a("button",{class:"text-xs text-red-600",onClick:i=>j(t.id)},"Delete",8,ne)]))),128))]),a("div",le,[x(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),class:"border rounded px-2 py-1 text-sm flex-1",placeholder:"New application name",onKeyup:C(T,["enter"])},null,544),[[w,m.value]]),a("div",ae,[x(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>u.value=t),class:"border rounded px-2 py-1 text-xs w-full",placeholder:"Tags (comma separated)",onInput:N,onKeyup:C(T,["enter"])},null,544),[[w,u.value]]),_.value.length?(l(),n("ul",ie,[(l(!0),n(f,null,k(_.value,t=>(l(),n("li",{key:t,class:"px-2 py-1 text-xs cursor-pointer hover:bg-blue-100",onMousedown:E(i=>V(t),["prevent"])},A(t),41,re))),128))])):v("",!0)]),a("button",{class:"bg-blue-500 text-white px-3 py-1 rounded text-sm",onClick:T},"Add")])])])}}});export{ce as default};
