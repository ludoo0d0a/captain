import{f as D,y as T,r as w,n as P,z as H,A as B,c as r,a as s,d as p,F,s as V,B as L,C as h,t as c,D as M,x as f,p as m,E as g,i as $,h as N,o as d}from"./D68jn0To.js";const j={class:"flex h-screen bg-gray-50"},A={class:"w-64 bg-white border-r flex flex-col"},z={class:"flex-1 p-4 space-y-2"},E=["onClick"],G={class:"flex-1 flex flex-col items-center justify-center p-8"},J={key:0,class:"bg-white rounded shadow p-8 w-full max-w-lg"},O={class:"text-2xl font-bold mb-4"},R={key:0,class:"mb-4"},X=["placeholder"],I={key:1,class:"mb-4"},q=["placeholder"],K={key:2,class:"mb-4"},Q=["placeholder"],W={key:1,class:"bg-white rounded shadow p-8 w-full max-w-lg"},Y={class:"space-y-4"},Z={class:"flex items-center gap-4"},ee=["disabled"],se=["disabled"],te={key:2,class:"text-gray-400 text-lg"},ne=D({__name:"settings",setup(ae){var y;const v=T(),b=v.connectorConfigs,u=w(((y=b[0])==null?void 0:y.id)||""),n=P(()=>b.find(t=>t.id===u.value)),a=H({baseUrl:"",username:"",password:""}),C=N(),o=$("showToast"),i=w(!1);async function k(){i.value=!0;try{(await $fetch("/api/database",{method:"POST",body:{action:"clear"}})).success?(o&&o("Database cleared successfully!","success"),window.location.reload()):o&&o("Failed to clear database","error")}catch{o&&o("Failed to clear database","error")}finally{i.value=!1}}async function S(){i.value=!0;try{(await $fetch("/api/database",{method:"POST",body:{action:"prefill"}})).success?(o&&o("Database prefilled with mock data successfully!","success"),window.location.reload()):o&&o("Failed to prefill database","error")}catch{o&&o("Failed to prefill database","error")}finally{i.value=!1}}function U(){C.push("/")}B(n,t=>{t&&(a.baseUrl=typeof t.baseUrl=="string"?t.baseUrl:"",a.username=typeof t.username=="string"?t.username:"",a.password=typeof t.password=="string"?t.password:"")},{immediate:!0});function _(t){v.updateConfig(t.id,{baseUrl:a.baseUrl,username:a.username,password:a.password})}function x(t){switch(t.type){case"GitHubActionsConnector":return"GitHub Actions";case"JenkinsConnector":return"Jenkins";case"SSHConnector":return"SSH";case"HTTPConnector":return"HTTP";case"XLDeployConnector":return"XL Deploy";default:return t.id}}return(t,e)=>(d(),r("div",j,[s("aside",A,[e[8]||(e[8]=s("div",{class:"h-16 flex items-center justify-center font-bold text-xl border-b"},"Settings",-1)),s("nav",z,[s("button",{class:"w-full text-left px-4 py-2 rounded hover:bg-gray-100 font-semibold mb-2",onClick:U},e[5]||(e[5]=[s("span",{class:"i-heroicons-arrow-left mr-2"},null,-1),p(" Back to Dashboard ")])),(d(!0),r(F,null,V(L(b),l=>(d(),r("button",{key:l.id,class:h(["w-full text-left px-4 py-2 rounded hover:bg-gray-100",{"bg-gray-200 font-semibold":u.value===l.id}]),onClick:oe=>u.value=l.id},[e[6]||(e[6]=s("span",{class:"i-heroicons-cog-6-tooth mr-2"},null,-1)),p(" "+c(x(l)),1)],10,E))),128)),s("button",{class:h(["w-full text-left px-4 py-2 rounded hover:bg-gray-100",{"bg-gray-200 font-semibold":u.value==="database"}]),onClick:e[0]||(e[0]=l=>u.value="database")},e[7]||(e[7]=[s("span",{class:"i-heroicons-database mr-2"},null,-1),p(" Database Management ")]),2)])]),s("main",G,[n.value?(d(),r("div",J,[s("h2",O,c(x(n.value))+" Settings",1),s("form",{onSubmit:e[4]||(e[4]=M(l=>_(n.value),["prevent"]))},["baseUrl"in n.value?(d(),r("div",R,[e[9]||(e[9]=s("label",{class:"block text-xs font-semibold mb-1"},"Base URL",-1)),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.baseUrl=l),class:"border rounded px-2 py-1 text-sm w-full",placeholder:String(n.value.baseUrl||"https://...")},null,8,X),[[g,a.baseUrl]])])):f("",!0),"username"in n.value?(d(),r("div",I,[e[10]||(e[10]=s("label",{class:"block text-xs font-semibold mb-1"},"Username",-1)),m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.username=l),class:"border rounded px-2 py-1 text-sm w-full",placeholder:String(n.value.username||"Username")},null,8,q),[[g,a.username]])])):f("",!0),"password"in n.value?(d(),r("div",K,[e[11]||(e[11]=s("label",{class:"block text-xs font-semibold mb-1"},"Password",-1)),m(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>a.password=l),type:"password",class:"border rounded px-2 py-1 text-sm w-full",placeholder:String(n.value.password||"Password")},null,8,Q),[[g,a.password]])])):f("",!0),e[12]||(e[12]=s("button",{type:"submit",class:"mt-2 px-4 py-2 rounded text-sm font-semibold bg-blue-500 text-white"},"Save",-1))],32)])):u.value==="database"?(d(),r("div",W,[e[14]||(e[14]=s("h2",{class:"text-2xl font-bold mb-4"},"Database Management",-1)),s("div",Y,[s("div",Z,[s("button",{onClick:k,disabled:i.value,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 disabled:opacity-50"},c(i.value?"Clearing...":"Clear Database"),9,ee),s("button",{onClick:S,disabled:i.value,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50"},c(i.value?"Prefilling...":"Prefill with Mock Data"),9,se)]),e[13]||(e[13]=s("p",{class:"text-sm text-gray-600"}," Clear database removes all data. Prefill adds sample applications, environments, versions, and deployments for testing. ",-1))])])):(d(),r("div",te,"Select a connector to configure."))])]))}});export{ne as default};
